***************
*** 48,60 ****
  # Define parameters and directives needed in compile/link steps.
  #========================================================================
  # C Compiler
- CC = gcc
  
  # Compile flags (use fairly standard -O3 as default)
- CFLAGS = -O3 -I ../include $(DEFINES) 
  
  # Linker flags
- LDFLAGS = -g -fpic -shared -Wl,-soname,$(PROGLIB_SONAME)
  
  # Libraries
  LIBS = -lgsl -lgslcblas -lm
--- 48,60 ----
  # Define parameters and directives needed in compile/link steps.
  #========================================================================
  # C Compiler
+ #CC = gcc
  
  # Compile flags (use fairly standard -O3 as default)
+ CFLAGS += -I ../include $(DEFINES) 
  
  # Linker flags
+ LDFLAGS += -g -fpic -shared -Wl,-soname,$(PROGLIB_SONAME)
  
  # Libraries
  LIBS = -lgsl -lgslcblas -lm
***************
*** 72,78 ****
  # 	ranlib $(PROGLIB_A)
  
  $(PROGLIB_SO_VERSION): $(LIBOBJECTS) $(LIBINCLUDES)
- 	gcc $(LDFLAGS) -o $(PROGLIB_SO_VERSION) $(LIBOBJECTS)
  	ldconfig -n .
  	ln -sf $(PROGLIB_SO_VERSION) $(PROGLIB_SO)
  
--- 72,78 ----
  # 	ranlib $(PROGLIB_A)
  
  $(PROGLIB_SO_VERSION): $(LIBOBJECTS) $(LIBINCLUDES)
+ 	$(CC) $(LDFLAGS) -o $(PROGLIB_SO_VERSION) $(LIBOBJECTS)
  	ldconfig -n .
  	ln -sf $(PROGLIB_SO_VERSION) $(PROGLIB_SO)
  
***************
*** 108,121 ****
  # specfile for the dieharder package, in precisely the right locations.
  #========================================================================
  install: $(PROGLIB_SO_VERSION) $(PROGLIB_A) $(PROGMAN)
- 	(install -d $(libdir); \
- 	install -m 755 $(PROGLIB_SO_VERSION) $(libdir)/$(PROGLIB_SO_VERSION); \
-         ln -sf $(libdir)/$(PROGLIB_SO_VERSION) $(libdir)/$(PROGLIB_SO); \
- 	install -d $(includedir)/dieharder; \
- 	install -m 644 ../include/dieharder/*.h $(includedir)/dieharder; \
- 	install -d $(prefix)/share/man/man3; \
- 	gzip -c -9 $(PROGMAN) > $(PROGMAN).gz; \
- 	install -m 644 $(DIR).3.gz $(prefix)/share/man/man3)
  
  # FC requires no static lib install
  # 	install -m 755 $(PROGLIB_A) $(libdir)/$(PROGLIB_A); \
--- 108,120 ----
  # specfile for the dieharder package, in precisely the right locations.
  #========================================================================
  install: $(PROGLIB_SO_VERSION) $(PROGLIB_A) $(PROGMAN)
+ 	(install -d $(DESTDIR)$(libdir); \
+ 	install -m 755 $(PROGLIB_SO_VERSION) $(DESTDIR)$(libdir)/$(PROGLIB_SO_VERSION); \
+         ln -sf $(libdir)/$(PROGLIB_SO_VERSION) $(DESTDIR)$(libdir)/$(PROGLIB_SO); \
+ 	install -d $(DESTDIR)$(includedir)/dieharder; \
+ 	install -m 644 ../include/dieharder/*.h $(DESTDIR)$(includedir)/dieharder; \
+ 	install -d $(DESTDIR)$(mandir)/man3; \
+ 	install -m 644 $(DIR).3 $(DESTDIR)$(mandir)/man3)
  
  # FC requires no static lib install
  # 	install -m 755 $(PROGLIB_A) $(libdir)/$(PROGLIB_A); \
